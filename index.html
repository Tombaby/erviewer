<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>json demo</title>
    <link rel="stylesheet" href="css/font-awesome.min.css" />
    <style type="text/css">
        html {height: 100%; width: 100%;}
        body {margin:0; padding:0; font-size: 10px; height: 100%; width: 100%;}
        p {margin:0; padding:0;}
        
        #banner {
            width: 100%; height: 32px; position: fixed; top: 0; background-color: lightgray; z-index: 9999; opacity: 0.85; font-size: 12pt;
        }

        #main {
            display: flex; flex:auto;
        }

        #nav {
            width: 100px;
            max-width: 100px;
            min-width: 100px;
            background-color: lightgray;
            z-index: 9998;
            opacity: 0.75;
        }

        #graph div.graph {
            background: none repeat scroll 0 0 #ffffff;
            border-style: solid;
            border-width: 1px;
            border-color: #999999;
            border-radius: 4px;
            /*border-radius: 10px 10px 10px 10px;*/
            box-shadow: 2px 1px 10px rgba(39, 57, 102, 0.44);
            color: #333333;
            display: inline-block;
            position: absolute;
            min-height: 32px;
        }
        #graph div.graph div.head {
            border-bottom: 1px solid #cccccc;
            border-top-left-radius: 4px;
            border-top-right-radius: 4px;
            overflow: auto;
            padding: 5px;
            background: #f0f6f7;
        }
        #graph div.graph div.head div.title {
            float: left;
        }
        #graph div.graph div.head div.icons {
            float: right;
            margin-left: 20px;
        }
        #graph div.graph div.head div.icons a {
            border: none;
        }
        #graph div.graph div.content {
            padding: 5px;
            text-align: center;
        }

        #graph div.graph div.content td {
            text-align: left;
            border-right-style: solid;
            border-right-color: #eeeeee;
            border-right-width: 1px;
        }
        #button {width: 200px; height: 200px; position: absolute; top:5px; right: 10px; display: block; font-size: 16px; font-weight: bold;}

        #banner ul {list-style: none; line-height: 35px; margin:0;}
        #banner ul li {display: inline; padding: 5px;}
        .icon {padding: 4px; }
        .icon:hover {border-color: #666666; background: #999999; cursor: pointer;}

        .dialog {width: 400px; display: none; position: absolute; z-index: 999;  border-style:solid; border-width: 1px; border-color: #cccccc; border-radius: 4px; box-shadow: 2px 1px 10px rgba(39, 57, 102, 0.44); color: black; background-color: #ffffff; }
        .dialog-head {height: 16px; padding: 4px; background-color: #eeeeee; border-bottom: 1px solid #cccccc; border-top-left-radius: 4px; border-top-right-radius: 4px;}
        .dialog-head .title {float: left; font-size: 12px; font-style: inherit; }
        .dialog-head .icons {float: right; padding: 2px; border: none;}
        .dialog-body {padding: 4px; min-height: 160px;}
    </style>
</head>
<body>

<div id="banner">
    <ul>
        <!-- <li><a title="open model file" onclick="openFileDialog()"><i class="icon iconfont icon-refresh"></i></a></li> -->
        <!-- <li><a title="save model file"><i class="icon iconfont icon-download"></i></a></li> -->
        <!-- <li><a title="import from db"><i class="icon iconfont icon-down"></i></a></li> -->
        <!-- <li><a title="export to db"><i class="icon iconfont icon-up"></i></a></li> -->
        <li><a title="show nav side bar" onclick="#"><i class="fa fa-columns"></i></a></li>
        <li><a title="open model file" onclick="openFileDialog()"><i class="fa fa-folder-open"></i></a></li>
        <li><a title="save model file"><i class="fa fa-floppy-o"></i></a></li>
        <li><a title="import from db"><i class="fa fa-arrow-circle-down"></i></a></li>
        <li><a title="export to db"><i class="fa fa-arrow-circle-up"></i></a></li>
    </ul>
</div>
<div id="main">
    <div id="nav">

    </div>
    <div id="container">
        <div id="canvas"></div>
        <div id="graph"></div>
    </div>
</div>

<div id="open-file-dialog" class="dialog">
    <div class="dialog-head">
        <div class="title">Open Model File...</div>
        <div class="icons"><a onclick="closeFileDialog()"><i class="fa fa-close"></i></a></div>
    </div>
    <div class="dialog-body">
        <form>
            <input type="file" ></file>
        </form>
    </div>
</div>
<script type="text/javascript" src="js/raphael.js"></script>
<script type="text/javascript" src="js/jquery-1.12.4.js"></script>
<script>if (typeof module === 'object') {window.jQuery = window.$ = module.exports;};</script>
<script type="text/javascript" src="js/jquery-ui-1.12.1.js"></script>
<script type="text/javascript" src="js/connection.js"></script>
<script type="text/javascript" src="js/graph.js"></script>

<script type="text/html" id="T-graph">

</script>

<script>
    $('#open-file-dialog').draggable({
        cursor: "move"
    });

    function closeFileDialog() {
        $('#open-file-dialog').css('display', 'none');
    }

    function openFileDialog() {
        event.preventDefault();
        var x = window.innerWidth / 2 - 200; 
        $('#open-file-dialog').css({'display':'inline-block', 'left': x+'px', 'top': '80px'});
    }

    const DBModel = require("./js/ermodel.js")
    var ermodel = new DBModel({
        dbinfo : {
            host: '127.0.0.1',
            user: 'emucoo',
            password: '12345678',
            port: '3306',
            database: 'emucoo-pre',
            multipleStatements: true
        },
        onLoaded: function(models) {
            Graph.drawModels(models, 'canvas', 'graph');
            // console.log(Graph);
        }
    }); 
</script>
</body>
</html>
